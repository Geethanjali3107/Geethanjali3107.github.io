<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Railway Ticket Booking</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  label, input, button { margin: 5px 0; display: block; }
  .container { max-width: 400px; }
</style>
</head>
<body>

<div class="container">
  <h2>Book a Railway Ticket</h2>
  <label for="passengerId">Passenger ID:</label>
  <input type="number" id="passengerId" />

  <label for="trainId">Train ID:</label>
  <input type="number" id="trainId" />

  <label for="seatNumber">Seat Number:</label>
  <input type="text" id="seatNumber" />

  <button onclick="bookTicket()">Book Ticket</button>
  <p id="bookResult"></p>
</div>

<div class="container">
  <h2>Cancel a Booking</h2>
  <label for="bookingId">Booking ID:</label>
  <input type="number" id="bookingId" />
  <button onclick="cancelBooking()">Cancel Booking</button>
  <p id="cancelResult"></p>
</div>

<script>
async function bookTicket() {
  const passengerId = document.getElementById('passengerId').value;
  const trainId = document.getElementById('trainId').value;
  const seatNumber = document.getElementById('seatNumber').value;

  try {
    const response = await fetch('/api/book_ticket', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ passengerId, trainId, seatNumber })
    });
    const data = await response.json();
    document.getElementById('bookResult').textContent = data.message || 'Booking completed.';
  } catch (error) {
    document.getElementById('bookResult').textContent = 'Error booking ticket.';
  }
}

async function cancelBooking() {
  const bookingId = document.getElementById('bookingId').value;

  try {
    const response = await fetch('/api/cancel_booking', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ bookingId })
    });
    const data = await response.json();
    document.getElementById('cancelResult').textContent = data.message || 'Cancellation completed.';
  } catch (error) {
    document.getElementById('cancelResult').textContent = 'Error cancelling booking.';
  }
}
</script>

</body>
</html>
